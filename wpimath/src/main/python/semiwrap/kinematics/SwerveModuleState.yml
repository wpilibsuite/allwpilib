extra_includes:
- wpystruct.h

classes:
  wpi::math::SwerveModuleState:
    force_no_default_constructor: true
    attributes:
      speed:
      angle:
    methods:
      operator==:
      Optimize:
        overloads:
          const Rotation2d&:
          const SwerveModuleState&, const Rotation2d&:
            ignore: true
      CosineScale:

inline_code: |
  cls_SwerveModuleState
    .def(
      py::init<
        wpi::units::meters_per_second_t, wpi::math::Rotation2d
      >(),
      py::arg("speed") = 0, py::arg("angle") = wpi::math::Rotation2d()
    )
    .def_property("speed_fps",
      [](SwerveModuleState * self) -> wpi::units::feet_per_second_t {
        return self->speed;
      },
      [](SwerveModuleState * self, wpi::units::feet_per_second_t speed) {
        self->speed = speed;
      }
    )
    .def("__repr__", [](const SwerveModuleState &ss) -> std::string {
      return "SwerveModuleState(speed=" + std::to_string(ss.speed()) + ", "
                               "angle=" + std::to_string(ss.angle.Radians()()) + ")";
    })
  ;

  SetupWPyStruct<wpi::math::SwerveModuleState>(cls_SwerveModuleState);
