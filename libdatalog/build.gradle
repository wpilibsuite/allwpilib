ext {
    useJava = true
    useCpp = true
    baseId = 'libdatalog'
    groupId = 'edu.wpi.first.datalog'

    nativeName = 'libdatalog'
    devMain = 'edu.wpi.first.math.DevMain'
}

apply from: "${rootDir}/shared/jni/setupBuild.gradle"

model {
    components {
        all {
            it.sources.each {
                it.exportedHeaders {
                    srcDirs 'src/main/native/include'
                }
            }
            // if (!it.buildable || !(it instanceof NativeBinarySpec)) {
            //     return
            // }
            // if (it.component.name == "${nativeName}JNI") {
            //     lib project ':wpiutil', library: 'wpiutil', linkage: 'static'
            // } else {
            //     lib project: ':wpiutil', library: 'wpiutil', linkage: 'shared'
            // }
        }
    }
}

// model {
//     components {}
//     binaries {
//         all {
//             if (!it.buildable || !(it instanceof NativeBinarySpec)) {
//                 return
//             }
//             if (it.component.name == "${nativeName}JNI") {
//                 lib project: ':wpinet', library: 'wpinet', linkage: 'static'
//                 lib project: ':wpiutil', library: 'wpiutil', linkage: 'static'
//                 lib project: ':libdatalog', library: 'libdatalog', linkage: 'static'
//             } else {
//                 lib project: ':wpinet', library: 'wpinet', linkage: 'shared'
//                 lib project: ':wpiutil', library: 'wpiutil', linkage: 'shared'
//                 lib project: ':libdatalog', library: 'libdatalog', linkage: 'shared'
//             }
//         }
//     }
// }

dependencies {
    api project(":wpiutil")
}
